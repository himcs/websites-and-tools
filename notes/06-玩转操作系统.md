# 一、基础认识

## 关于PE、BIOS与UEFI 、 MBR和GPT

### PE：

[体验最好的 PE 系统是什么？](https://www.zhihu.com/question/40137216)

> 1、目前最良心的最好用的PE，应该是李培聪先生的“微PE”。[微PE工具箱 - 最好用的WinPE装机维护工具](http://www.wepe.com.cn/download.html)

### BIOS和UEFI

UEFI 是取代传统 BIOS 的，全称“统一的可扩展固件接口”。MBR 则是传统的分区表类型，最大的缺点则是不支持容量大于 2T 的硬盘。GPT 则弥补了 MBR 这个缺点，最大支持 18EB 的硬盘，是基于 UEFI 使用的磁盘分区架构。



相关阅读：

- BIOS中文意思：[如何设置ThinkPad S1 Yoga BIOS Setup](https://zm10.sm-tc.cn/?src=l4uLj8XQ0IuXlpGU0ZOakZCJkNGckJLRnJHQl4uSk4zQlJGQiJOam5ia0Juai56Wk6DNz87Lz8nPys7OzM7OzsfMy9GXi5KT&uid=1bb14c7fc13bbf5ada5972a917c90bdc&hid=a50f725ecb1c10ced7f6c68d3f2cf4c2&pos=2&cid=9&time=1519216780276&from=click&restype=1&pagetype=0000004000000402&bu=structure_web_info&query=boot+order+lock&mode=&v=1&uc_param_str=dnntnwvepffrgibijbprsvdsdichei)
- [UEFI是什么？与BIOS的区别在哪里？UEFI详解！](http://www.ihacksoft.com/uefi.html)
- [UEFI+GPT引导基础篇（一）：什么是GPT，什么是UEFI？](https://www.iruanmi.com/what-is-gpt-and-what-is-uefi/)
- [大白菜UEFI版和装机版制作U盘有什么区别](http://www.bigbaicai.com/rjjc/cjwt/1751.html) 

### MBR和GPT



## 机械硬盘转速和缓存

[大家觉得机械硬盘转速和缓存哪个对速度影响更大呢？](https://steamcn.com/t447918-1-1)  【荐】

> 所以说，缓存还是蛮有用的，不止可以延长机械硬盘寿命，还能在一定的程度上提升机械硬盘速度速度，缓存32MB和64MB差距会较大，但32MB以下的和64MB以上的差距就不大了。
>
> ......



## 硬盘分区

知乎：[硬盘主分区，扩展分区，逻辑分区，动态分区这些名称都是什么意思？](https://www.zhihu.com/question/20281689)
> 这个回答值得先看看。 「这也就是为什么，操作系统不能安装在逻辑分区的原因了。」（MBR分区表的由于本身结构的限制，最多允许在一个硬盘上同时创建4个主分区；而GPT分区表则在设计时进行了改进，基本没有主分区数量的限制，只要有没有占用的盘符，就可以创建更多地主分区。）一个硬盘最多可创建4个主分区。活动分区是基于主分区的，磁盘分区中的任意主分区都可以设置为活动分区。如果电脑上4个主分区都安装了不同的系统，那被标记为活动分区的主分区将用于初始引导，即启动活动分区内安装的系统。

PS：关于硬盘分区，不管什么系统，(MBR)硬盘最多能分4个主分区，当然了，扩展分区（可以包括很多逻辑分区）算一个主分区。
![](https://pic3.zhimg.com/80/v2-c186e51625a2dcf2d8e1666b4acc5606_hd.jpg)


再看这篇文章：[认识主分区,活动分区,扩展分区和逻辑分区](http://www.disktool.cn/jiaocheng/basic-partition.html)  会有更加清晰的认识。

[使用主分区和逻辑分区的意义在哪里？](https://segmentfault.com/q/1010000000699894)

[电脑硬盘主分区和逻辑分区的区别是什么](https://jingyan.baidu.com/article/c85b7a642aade8003bac950e.html)

这篇文章也解释了很多：[电脑硬盘分3个主分区可以吗？](https://zhidao.baidu.com/question/1540772428888403707.html)


**分区的有关问题**

系统能安装在「逻辑分区」吗？
> [逻辑分区可以装系统吗](https://zhidao.baidu.com/question/1545048991841292267.html)
> 当然可以，不过系统的引导文件必需要在主分区这下才行！这点其实不用你去设置，系统都知道一定要安装引导文件到C盘的！

[Linux可不可以装在逻辑分区中？](https://zhidao.baidu.com/question/50824713.html) 


这里有个百度知道： [一个硬盘可以没有主分区么?](https://zhidao.baidu.com/question/151094214.html)

> 这个问题不是绝对的。如已有一块硬盘，其上有主分区，即可安装操作系统使用。而另一块硬盘则可以没有主分区，即全为逻辑分区。这第二块硬盘的分区中，仍可安装操作系统，与第一块盘的系统，组成多操作系统环境。
>
> 这块没有主分区的硬盘，可以安装操作系统使用的秘密，就在于它的启动引导程序，仍被存放在第一块盘的主分区中，路标指向多系统所在路径。
>
> 但，如果仅有一块硬盘，没有主分区，即失去了引导启动的功能，即便安装了操作系统也不能使用的。硬盘中光有主分区，还不能满足启动系统条件，还要“激活”主分区才行。

**关于分区的总结：**

> ***总结 1：***
>
> 主分区也可成为“引导分区”，会被操作系统和主板认定为这个硬盘的第一个分区。所以C盘永远都是排在所有磁盘分区的第一的位置上。 
>
> 除去主分区所占用的容量以外，剩下的容量被认定为扩展分区。通俗的讲就是主分区是硬盘的主人，而扩展分区是这个硬盘上的仆人，主分区和扩展分区为主从关系。
>
> 扩展分区如果不再进行分区了，那么扩展分区就是逻辑分区了。如果还需要进行分区操作的话，则所谓的逻辑分区只能从扩展分区上操作。就相当于在仆人中（扩展分区上）进行细分类，分成接电话的（D盘）、扫地的（E盘）、做饭的（F盘）等等。
>
> ***总结 2：***
>
> 最多可以分四个主分区，只不过其中只能有一个是活动的，另外扩展分区也相当于一个主分区，也就是说你可以分三个主分区和一个扩展分区。
>
> 不过一般有一个主分区就够了，你想分两个主分区也是完全可以的，系统不一定要装在主分区上的，也可以装在扩展分区下的逻辑分区里，不过windows的引导文件是一定要在第一分区，也就是c盘下的。

问：一个硬盘可以没有主分区么?

>  答：这个问题不是绝对的。如已有一块硬盘，其上有主分区，即可安装操作系统使用。而另一块硬盘则可以没有主分区，即全为逻辑分区。这第二块硬盘的分区中，仍可安装操作系统，与第一块盘的系统，组成多操作系统环境。
>
> 这块没有主分区的硬盘，可以安装操作系统使用的秘密，就在于它的启动引导程序，仍被存放在第一块盘的主分区中，路标指向多系统所在路径。但，如果仅有一块硬盘，没有主分区，即失去了引导启动的功能，即便安装了操作系统也不能使用的。硬盘中光有主分区，还不能满足启动系统条件，还要“激活”主分区才行。

关于这块的知识建议可以阅读：《鸟哥的Linux私房菜-基础篇》写的很好。　

## 虚拟内存

- [「技巧」如何正确设置WIN7的虚拟内存](http://a1.mp.uc.cn/article.html?uc_param_str=frdnsnpfvecpntnwprdssskt&client=ucweb&wm_cid=195827075242800128&wm_id=1a7f1e3e3793489c9f76a776c6eb1213&title_type=1&pagetype=share&btifl=100&wm_aid=ca9d27e92add43439c3ef35b48c6ca79&sdkdeep=2&sdksid=f0dc3324-5f0a-737b-5e16-ea379e5d0085&sdkoriginal=f0dc3324-5f0a-737b-5e16-ea379e5d0085)
- [内存足够大就不需要设置虚拟内存？](https://zm10.sm-tc.cn/?src=l4uLj8XQ0JWWkZiGnpHRnZ6Wm4rRnJCS0JLQno2LlpyTmtDMmp7KzsvHxs7Pmc7Hx8rNmsnOnZ2ezprRl4uSkw%3D%3D&uid=1bb14c7fc13bbf5ada5972a917c90bdc&hid=a1e424d6ac5089c9c144f2c458a7c4bd&pos=1&cid=9&time=1521305370299&from=click&restype=1&pagetype=0000004002000402&bu=web&query=%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A6%81%E8%AE%BE%E7%BD%AE%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E5%90%97&mode=&v=1&force=true&wap=false&province=%E6%B1%9F%E8%A5%BF%E7%9C%81&city=%E5%8D%97%E6%98%8C%E5%B8%82&uc_param_str=dnntnwvepffrgibijbprsvdsdichei)　

## 固态硬盘

> 在给固态硬盘分区时，需要设置4k对齐才能发挥它的优势。

[设置固态硬盘4k对齐视频教程](http://www.bigbaicai.com/videos/3105.html)

> 其实做法就是：设置「对齐分区到此扇区数的整数倍」，32位系统设置为对齐到 2048；64位系统设置为对齐到 4096。　

## 显卡

### 系列：GeForce/Tesla/Tesla

NVIDIA 的 GPU 产品主要有**GeForce、Tesla**和**Tesla**三大系列，虽然从硬件角度来看它们都采用同样的架构设计，也都支持用作通用计算(GPGPU)，但因为它们分别面向的目标市场以及产品定位的不同，这三个系列的GPU在软硬件的设计和支持上都存在许多差异。

可以这么看：

- GeForce：游戏显卡
- Quadro：专业绘图显卡
- Tesla：专业运算卡，主要进行并行运算，图形运算等  

> 补充：<https://share.iclient.ifeng.com/news/shareNews?fromType=vampire&aid=sub_42630074>
>
> 可能大家不太理解 GeForce、Quadro、Tesla三者的关系，其实这三种产品采用的是同样的GPU，但是根据具体需求的不同，所开放的功能也不一样，也就是老黄的手术刀阉掉的地方也不一样。GeForce作为游戏显卡，其价格在三个产品线当中是最便宜的，而关于游戏性能方面最重要的流处理器数量、单精度运算能力、DirectX的支持度等，都是完整的，但少了一些高级功能。而Quadro显卡相较于GeForce显卡，加入了完整的OpenGL支持，并且在顶级型号上加入了ECC显存。Tesla系列相较于GeForce系列则是去掉了显示接口，并且在高端型号上使用了支持双精度运算的GPU以及ECC显存。
>
> 
>
> 然而理论计算性能方面，采用相同GPU的Quadro显卡和GeForce显卡在计算能力上与昂贵的Tesla计算卡并没有什么区别，只是GeForce系列的显存容量一般相对较少。这样一来，许多预算吃紧的深度学习用户就会选择相对便宜的GeForce显卡来用作深度学习计算使用。目前GeForce 1080 Ti的价格为699美元，国内售价一般在6000元上下。Titan Xp的价格1200美元，国内售价一般为12000元左右。但是Tesla的价格可就不这么美丽了，入门款的 K80的价格都要高达3399美元，大约是40000左右人民币，而高端一点的Tesla P100的价格是5150美元，国内售价在50000元左右。

其中 Quadro 的定位是专业用途显卡而 Tesla 的定位是专业的 GPGPU，单价相对较高，也都很少会被用作其他用途。但面向消费者的 GeForce 显卡却因为出货量大，价格较低的缘故经常被当作另外两个专业产品的替代品来使用。

**生产厂商：**

**Tesla系列产品全部由NVIDIA原厂设计和生产，**产品品质和服务都更有保障。**GeForce显卡则主要由第三方厂商生产，**而且还区分为采用原厂设计的公版型号和厂商自行设计的非公版型号，其产品的稳定性可能也因不同厂商的设计和工艺水平存在差异。

**芯片及启用核心数量的差异：**

虽然同一代的GPU产品都采用相同的核心架构，但不同型号的GPU采用的是不同等级的GPU核心，比如作为Tesla系列旗舰的P100采用的是GP100核心，而P40和P4则分别采用的是GP102和GP104核心，在GeForce系列产品里，则还有采用更低的GP106/107/108等型号核心的产品。

![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190616164935.png)

(略。。。)

参考：

- [【立尔讯】NVIDIA GPU—Tesla和GeForce之间的区别](<http://www.learsun.com/Article/lexnvidiag.html>)
- [小科普 | “专业显卡”有什么用？ - 哔哩哔哩](<https://www.bilibili.com/read/cv7472/>)

### GPU架构：Tesla/Kepler/Fermi/Maxwell/Pascal/Volta

相关阅读：

- [NVIDIA显卡架构代号的另一面：他们都是伟大的科学先驱 - 超能网](<https://www.expreview.com/57805.html>)



分区助手的使用
===

以下为本人在 Windows 7 下使用「分区助手」的实践和心得：

假设你已经对一块硬盘分好区了，分区盘符分别为：E、F，并且 E、F盘下各有文件。实践心得如下：

1、我的一些实践：

1. 对未分配的硬盘「创建分区」，只会创建出一个分区，并且该分区默认为主分区，默认SDD分区 4k 对齐。
2. 可以点击整个磁盘，然后选择「快速分区」，可以一次性分很多区
3. 对主分区进行「创建分区」或「切割分区」操作，分出来的新区都是主分区
   1. 可以把新的分区转为逻辑分区 【注：转换过程，盘符里的文件不会被删除。】
   2. 也可以对原来的主分区转为逻辑分区，但这会多出一个 7.84M 的无盘符分区（电脑上不会显现）。【注：转换过程，盘符里的文件不会被删除。】
4. 逻辑分区可以转为正常主分区【注：转换过程，盘符里的文件不会被删除。】
5. 主分区和逻辑分区进行合并会变为主分区；逻辑分区和逻辑分区合并还是逻辑分区
6. 对 MBR 硬盘转换到 GPT 硬盘，对 GPT 硬盘转换到 MBR 硬盘，都不会删除盘符的文件，也没多出无盘符的隐藏分区之类的。
7. 在对已经安装好的系统的分区进行分区，会有提示一些提示，如重启，之后自动重启后，发现出现 `AOMEI Partittion Assistant PreOS Mode` 执行 Analyzing volume 界面。【所以，最好还是不要对已经安装了系统的盘符再分区】

2、关于切割分区  【】

可以对任意一个盘符切割出新的分区，原分区文件不会被删除，并且新的分区盘符字符递增，如对 E 盘在切割分出一个新的分区，新的分区盘符为：G。

注意：新的分区 G 盘，在「分区助手」软件中显示和 E 分区是相邻的。

3、关于合并分区  【】

只能对相邻的分区进行合并。如上面情况，只能对相邻的 E、G 合并，或 G、E 合并。合并后各自盘符的文件还会存在，比如点击 E 分区，合并 G 分区，那么合并后的新的分区则会把 G 盘的所有文件保存在 `G-drive-xxxxxx` 这个文件夹下。 参考官方教程：[怎么合并分区](https://www.disktool.cn/jiaocheng/merge-partitions.html) 

# 问题汇总

## 1. 内存条低压和标压可以混装吗？

经过我的查询和实验，确定现在的低压和标压条子是可以混用的。一般的内存条插口为了兼容标压条子，都是 1.5v 接口，所以 1.35v 的低压和 1.5v 的标压内存条都可以用。兼容问题上，网上有人说混用后 1.35v 的会自动升压到 1.5v，这也许是多年前的答案了，那时候的条子可能在里面仍然有 1.5v 的模块。而我这条 14 年的低压条子和标压混用后没有自动升压，cpu-z 检测出来的电压仍然是 1.35v。没有出现问题，一切正常，性能也能发挥完全，频率这些也没出问题。现在的电子产品都将兼容性考虑得很好，所以在这类问题上不必过于担心。

参考：[内存条低压和标压可以混装吗？ - 知乎](https://www.zhihu.com/question/27327665)

DDR4 2400内存可以在最高支持DDR4 2133内存的主板正常使用；反之，DDR4 2133内存也可在支持DDR4 2400内存的主板上安装使用。但内存会按两者中较低频率（本例中为2133MHz）运行。——from：http://ask.zol.com.cn/x/5585033.html



# 二、Windows 安装

## 2.1 安装 Windows7

非常简单。

1、方法一：使用 U 盘启动盘

1. 先制作一个 U 盘启动盘
2. 设置电脑 Bios 或者直接按电脑某键直接进入快速启动选择界面
3. 进入 PE 
4. 重装
   1. 使用还原方法（以前以为只有 Ghost 版的系统才可以使用该方法，后来发现原版系统也可以还原，但是还原之后，可能存在第三方些软件，这和你使用制作 U 盘启动盘的厂商有关）
   2. 使用安装原版的方法（略）

2、方法二：系统刻入进 U 盘

使用 UltraISO 软件可以直接把系统刻入进去 U 盘，然后安装。这里就略过了。自行网上搜下。



## 2.2 安装Windows10

安装 Win7 方式，同样可以用来安装 Win 10。

但些注意的地方：

（1）在使用 UEFI Bios 方式安装 Win10，要求你安装系统的磁盘是 GPT 分区表格式。否则你可以使用传统 Bios 方式安装，即 Legacy Bios 方式安装，那么你的磁盘可以是 MBR。

（）使用 UEFI Bios 方式安装 Win10，使用方法二安装的时候，有个注意的地方：

![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190624163535.png)

如上，这里的「选择引导驱动器」选择的是 MSR 那个分区（注：磁盘采用 GPT 分区表格式会存在这么个分区）。



## 2.3 Windows上安装Mac系统（安装“黑苹果”）

[ThinkPad X220 单硬盘安装 windows + mac os 完全教程]()





# 三、Linux 发行版安装

### 3.1 Ubuntu 安装



### 3.2 CentOS 安装





# 四、MacOS 安装





# 五、Win7+Ubuntu16.04 双系统安装个人实践

## 我的安装实践总结

UEFI/Legacy启动模式区分：

(1)进入系统查看 

运行cmd，然后输入 bcdedit /enum {current} 执行，如果 path 中给出的路径是 winload.efi ，则说明系统是通过 UEFI 模式启动的了

(2)开机时查看 

在开机的时候，如果显示开机画面是主板的logo，底下加上一个转圈，这应该就是UEFI启动。如果是出现系统开机画面时才出现转圈则是传统BIOS启动

(3)进入系统查看 

首先同时按下电脑的win键和r键，打开“运行”(或者直接在开始菜单中打开“运行”） 然后再输入msinfo32，点击确定。 然后就打开了系统信息的窗口。 查看 ”BIOS模式”，写的是UEFI就是UEFI，legacy就是传统BIOS启动。——from：<https://blog.csdn.net/GJXS2017/article/details/80296267>



准备：先 Windows7、Ubuntu 系统镜像准备好，磁盘分出一个区以便安装 Ubuntu。

**Win7+Ubuntu 双系统详细安装步骤：** 

1）先制作 U 盘启动盘（详细制作过程不说了），然后安装常规操作安装好 Windows7（注：本人使用的 legacy 方式安装，分区是 MBR 格式）；

2）然后再安装 Ubuntu 到刚才分出的那个区，安装步骤：

1. 先用 UltraISO 软件制作启动盘，可参照：<https://jingyan.baidu.com/article/3c48dd348bc005e10be358eb.html>；（注：如果最后安装失败，可以试试 Rufus 这个制作启动盘）

2. 制作完毕，然后 U 盘插入电脑，电脑开机根据主板按对应按键用于选择从 U 盘启动，如惠普笔记本选择 F9；

   ![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190602143529.png)

   注：这里补充下内容，总的来讲，设置电脑从 U 盘启动一共有两种方法，第一种是开机时候按快捷键然后选择 U 盘启动，如上；第二种进 Bios 然后设置 U 盘为第一启动项（[点击查看](http://www.upanok.com/jiaocheng/68.html)）。
   
   （利用快捷键启动相对来说比较简单快捷，推荐大家使用，但是如果你的电脑是没有热键选择启动项功能的，建议你第二种方法来设置了。）
   
3. 选择 U 盘进入，然后按照步骤来提示选择对应选项安装即可，注意，在「安装类型」我选择的是「其他类型」，然后进入到分区界面，这里我把我最开始分出的那个区分成了 4 个区，分别是 `/`、交换空间、`/boot`、`/home`，它们的作用可以参考如下：

   | **目录** | **建议大小** | 格式 | **描述**                                                     |
   | -------- | ------------ | ---- | ------------------------------------------------------------ |
   | /        | 10G-20G      | ext4 | 根目录                                                       |
   | swap     | <2048M       | swap | 交换空间                                                     |
   | /boot    | 200M左右     | ext4 | Linux的内核及引导系统程序所需要的文件，比如 vmlinuz initrd.img文件都位于这个目录中。在一般情况下，GRUB或LILO系统引导管理器也位于这个目录；启动撞在文件存放位置，如kernels，initrd，grub。 |
   | /tmp     | 5G左右       | ext4 | 系统的临时文件，一般系统重启不会被保存。（建立服务器需要？） |
   | /home    | 尽量大些     | ext4 | 用户工作目录；个人配置文件，如个人环境变量等；所有账号分配一个工作目录。 |

   注1：具体我的分区分别多大，就不细说了，这个根据用来安装 Ubuntu 的分区大小来细分。

   注2：这里分区我都是选择的「逻辑分区」，网上有说法是，因为原本电脑已经有了一个是主分区类型的引导器。

   !!!另外注意，在进行下一步的时候，别着急点击右下角的「现在安装」，在点击之前，先点击刚才分的 `/boot` 区，并且下面的「安装启动引导器的设置」选择 `/boot` 这个区，然后再点击「现在安装」开始安装。为什么这样？网上有说，如果不这样，那就是 Ubuntu 下引导 Windows 启动，假设 Ubuntu 系统出问题了，Windows 可能也很难进去了；这样做了，就可以在 Windows 引导 Ubuntu 的启动。详细参考网上的解释看看。

4. 后面设置用户名等等。

注意，在安装过程可能出现：

``` xml
the grub-efi-amd64-signed package failed to install into /target/.
```

类似错误提示。本人重复安装好几次还是这样，还是这样的提示。后面我尝试对于第一步的步骤，使用 [Rufus](<https://rufus.ie/zh_CN.html>) 制作启动盘，后面安装成功。这里放一个 Rufus 如何安装的链接供参考：[使用Rufus 3.4制作Ubuntu 18.04.1 U盘启动盘的方法](<https://ywnz.com/linuxjc/3978.html>)

安装 Ubuntu 系统后，然后拔出 U 盘，开机进入 Windows7 系统，下载安装 EasyBCD 工具进行设置。我是这样设置的：选择“Add New Entry” -> 选择“Linux/BSD” -> 选择“GRUB(Legacy)” -> Name自己取 -> Device 选择 Ubuntu 的 `/boot` 分区 -> Add Entry。在 “Edit Boot Menu”中选择「等待用户选择」。然后电脑重启开机可以看到 Windows7+Ubuntu的选择了。

![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190602153412.png)

注意：看网上很多人在“Linux/BSD”选择的是 GRUB2，我猜可能是因为他们采用的 uefi 模式安装和启动吧。

可能出现的问题的解决方式，供参考：

(1) 安装出现错误：the grub-efi-amd64-signed package failed to install into /target/.

解决方式参考1：<http://keep.01ue.com/?pi=731030&_a=app&_c=index&_m=p>

解决方式参考2：<https://www.cnblogs.com/xiaojieshisilang/p/9334095.html>

解决方式参考3：<https://blog.csdn.net/qingsong3333/article/details/80863293>

解决方式参考4：<https://blog.csdn.net/qq_29985391/article/details/78663823>

> 1、给Linux Ubuntu 分区的时候，我没有单独分boot分区，只分了 \(根分区)和Swap(交换分区)。
>
> 2、(我的电脑是支持UEFI的)进入BIOS，找到BootMode，有三个选项Auto 、UEFI Only、Legacy Only。  选择Legacy       Only（传统模式）。
>
> 3、之后保存重启进入GNU GRUB进行选择。
>
> 4、UEFI和Legacy 
>
> ​	可扩展固件接口（Extensible Firmware Interface，EFI）是 Intel 为全新类型的 PC 固件的体系结构、接口和服务提出的建议标准。　其主要目的是为了提供一组在 OS 加载之前（启动前）在所有平台上一致的、正确指定的启动服务，被看做是有近20多年历史的PC BIOS的继任者。
>
> ​	由于电脑教育普及，很多人都知道BIOS就是Basic Input/Output System，翻成中文是“基本输入/输出系统”，是一种所谓的“固件”，负责在开机时做硬件启动和检测等工作，并且担任操作系统控制硬件时的中介角色。
>
> ……

(2) Win7 和 Ubuntu 双系统时间不一样问题

解决方法1：

- 修改 Windows 对硬件时间的对待方式，让 Windows 把硬件时间当作 UTC（需要重启），在命令提示符下输入：

  ``` xml
  Reg add HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1
  ```

  即可成功解决。

参考来源：<https://blog.csdn.net/zyqblog/article/details/79318955>

(3) 开机界面多余的选项

- [ubuntu删除开机界面中多余的选项](<https://blog.csdn.net/ztl0013/article/details/7936134>)
- [ubuntu 引导修复，grub2多余选项删除](<https://blog.csdn.net/u013270341/article/details/79005827>)

相关阅读：

- 知乎：[怎样安装 Windows 7 与 Linux 的双系统？](https://www.zhihu.com/question/19867618)
- [Win7与Ubuntu 16.04双系统安装教程](https://luozm.github.io/win-ubuntu)
- [Windows下安装Ubuntu 16.04双系统 ](https://www.cnblogs.com/Duane/p/5424218.html) 

安装双系统参考教程：

- [Linux探索之旅 | 第一部分第四课：磁盘分区+完成Ubuntu安装](https://www.jianshu.com/p/53b8b76439d0)
- [Win7下硬盘安装Ubuntu 12.04.3双系统](https://www.bbsmax.com/A/gVdnNVREdW/)
- [win7下硬盘安装win7+linuxUbuntu双系统方法](https://www.bbsmax.com/A/GBJrWZrG50/)



# 六、Win10+Ubuntu18.04 双系统安装个人实践

## UEFI 启动模式下的安装（UEFI Bios）

### 0. 安装 Win10

#### win10 各个版本区别

本人下载的在【[MSDN我要告诉你](<https://msdn.itellyou.cn/>)】网站最新的 Windows 10,Version 1903(Updated June 2019)，选择的为：`Windows 10 (consumer edition), version 1903 (updated June 2019) (x64) - DVD (Chinese-Simplified) `，下载地址：

``` xml
ed2k://|file|cn_windows_10_consumer_edition_version_1903_updated_june_2019_x64_dvd_cedfd58d.iso|5126440960|73CC4AC1F0FA133E76DA82ECE0A3B240|/
```

``` xml
文件名: cn_windows_10_consumer_edition_version_1903_updated_june_2019_x64_dvd_cedfd58d.iso
SHA1: 941f0b57498128d120a0985bd87a66dfdf25cd6a
文件大小: 4.77GB
发布时间: 2019-06-19
```

在那个网站还有 business edition 版本，什么意思呢？我们来看一个帖子下对于 Business Edition 和 Consumer Edition  区别的说法：

> 某某1：
>
> Consumer 为零售版，Business 为批量版
>
> Consumer editions 包括：家庭版、家庭单语言版、教育版、专业版、专业教育版、专业工作站版。
>
> Business editions 包括：专业版、企业版、教育版、专业工作站版、专业教育版。
>
> 某某2：
>
> 用大白话说，consumer 可以用 tb10块的key激活，business 只能 vol 批量激活(就是 kms 激活) 。
>
> ——from：<https://bbs.nga.cn/read.php?tid=14156789&rand=395>

关于 win10 的各个版本的区别可以看下这个：[Win10七大版本区别在哪？Win10哪个版本最好用？-太平洋电脑网](https://www.pconline.com.cn/win10/1086/10863673.html)

> Win10家庭版、Win10专业版、Win10企业版、Win10教育版、Win10移动版、Win10移动企业版、Win10物联网版。

#### win10 安装和激活

先安装 Windows 10，这里就记录了，正常操作就可以。【**注：本人发现按安装完 Win10，各种驱动都已经有了， 包括无线网卡驱动，并不需要去单独找驱动安装。**】

**如何激活 Win10？？** 本人安装的为 Win10 专业版，使用的如下方式激活，成功激活 Win10。

这里可以先看看【[win10永久激活方法（真正永久激活）](<https://jingyan.baidu.com/article/9113f81b4d49232b3314c75e.html>)】：

> win10 的花费不低，所以很多电脑用户选择搜索激活，但是大部分用的激活工具激活的基本上都是假激活（或许本来就是），kms 激活和试用账号临时激活都是有时间限制的，虽然到时都可以继续，但是系统还是明确此激活为假激活，并没有真正激活，下面是真正永久激活教程。

看完永久激活方法，可以参照这个博文来，【[Windows10 专业版激活 【3秒激活 亲测有效】](https://blog.csdn.net/weixin_38327420/article/details/83182062)】，和上面的永久方法一样。操作步骤我总结如下：

1、Win+R 打开 CMD，注意：如果遇到没有权限或是别的问题，请用管理员身份打开：按 Win 键，搜索 cmd，以管理员身份打开；

2、输入命令：`slmgr.vbs /upk` 执行，此时弹出窗口显未“已成功卸载了产品密钥”；

3、接着输入：`slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX`， 弹出窗口提示：“成功的安装了产品密钥”；

4、继续输入命令：`slmgr /skms zh.us.to`， 弹出窗口提示：“密钥管理服务计算机名成功的设置为zh.us.to”；

5、接下来输入以下命令：`slmgr /ato`，此时将弹出窗口提示：“成功的激活了产品”。

如上操作，成功激活。

下面主要记录下安装完 Win10 后安装 Ubuntu 的要点。

### 1. 关闭快速启动

先禁用 Windows 10 快速启动，不知道是不是必须，如果进不了选择启动项，请先禁用快速启动。

如何禁用？按住 Win + X，选择“电源选项”，依次执行："选择电源按钮的功能" -> "更改当前不可用的设置" -> 取消选择"启用快速启动(推荐)"。——from：注： “快速启动”是Windows 8时代引进的新特性，建议关闭该特性的原因是，“快速启动”会影响Grub开机引导过程，可能出现无法载入Ubuntu的状况，最后选择“保存修改”。——from：<https://www.jianshu.com/p/d79821e9fdbe>

### 2. 开始安装 Ubuntu

主要参考：[UEFI启动模式下的Win10+Ubuntu双系统安装指南 - 知乎](https://zhuanlan.zhihu.com/p/35376135)

UEFI BOIS 和 Legacy BOIS：[UEFI BIOS和 传统BIOS 启动模式对比](<https://blog.csdn.net/loveanao/article/details/49281589>)，以下有摘入部分内容。

**传统 BIOS 开机流程：**



![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190624173158.png)

从你按下主机机壳上的电源键，到进入作业系统的期间，储存於主机板上那颗 EEPROM（电气可抹除暨可程式化唯读记忆体）裡的 BIOS 便会开始执行以下的工作：

1. 初始化：
2. POST（Power On Self Test；开机自我检测）：
3. 记录电脑系统的设定值：
4. 提供常驻程式：
5. 载入作业系统：

**UEFI BIOS 系统的开机流程：**

![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190624173448.png)

1. SEC阶段：
2. PEI阶段：
3. DXE阶段：
4. TSL阶段：

在继续探讨何谓 UEFI BIOS 之前，先来看看传统 BIOS 有哪些问题，让 Intel 决心带头推出 UEFI BIOS。

1. 过时的16位元模式
2. 只有1MB定址空间
3. 组合语言难维护
4. 十年不变的程式码

UEFI 的版本发展：

最初制定的 EFI 版本 2000 年 12 月的 1.02 版。在 2002 年的 12 月又释出了加入EFI驱动程式模型的 1.10 版。于 2005 年，Intel 将此规格提供给负责 UEFI 开发和推广的 UEFI 论坛。為了反映这点，EFI 也被更名為 UEFI。在大部分的文件资料中，EFI 和 UEFI 讲的是一样的东西。

......

UEFI BIOS 哪裡好？

1. 定址空间更弹性
2. 什麼系统都能用
3. 开发维护更容易
4. 精简系统用途大

（略。。。）

END。

现在的电脑大多数使用了 UEFI BIOS 引导系统（原来都是使用传统 Legacy BIOS），从而加快启动速度，但同时也给用惯传统 BIOS 的用户带来很多困惑！电脑不能识别制作好的 U 盘 PE 系统了。

![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190624174009.png)

（略。。。）

关于安装过程的如何分区就不细讲了，不用和别人一致，根据自己实际情况合理分区就行。不过在这里要提下，原文作者没有自己另外新建 efi 分区，文中写到：

> 1）最终用的引导区（/boot）应该安装在支持EFI的分区，我选择安装在了Window引导分区下，一般单个系统引导区设为300MB左右，据说重新划区安装也没问题，这里没有尝试。
>
> ![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190624174904.png)

作者这里把 Ubuntu 启动引导安装在 Windows 引导分区下。【注：我亲测这个方式可以】

但我也有看到有另外新建一个 efi 分区，然后把 Ubuntu 启动引导安装在这的。如何新建，参考如下图：

![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190624175557.png)

**注意**：它的作用和boot引导分区一样，但是boot引导是默认grub引导的，而efi显然是UEFI引导的。不要按照那些老教程去选boot引导分区，也就是最后你的挂载点里没有“/boot”这一项，否则你就没办法UEFI启动两个系统了。——from：<https://blog.csdn.net/DeMonliuhui/article/details/77483523>

### 3. Linux 分区了解下

这里关于 Ubuntu 的分区了解下仅参考，来源【<https://blog.csdn.net/DeMonliuhui/article/details/77483523>】

**1.swap交换空间**：虚拟内存地方。

``` xml
大小：与电脑内存一致即可，最小不能低于电脑内存的一半。小了不够用，大了没用。
新分区的类型:主分区
新分区的位置：空间起始位置
用于：交换空间
```

**2.efi系统分区**：系统引导文件都会在里面。 

``` xml
大小：大小最好不要小于256MB，系统引导文件都会在里面，我给的512MB。
新分区的类型:逻辑分区（这里不是主分区，请勿怀疑，老式的boot挂载才是主分区）
新分区的位置：空间起始位置
用于：efi系统分区
```

注意：它的作用和 boot 引导分区一样，但是 boot 引导是默认 grub 引导的，而 efi 显然是 UEFI 引导的。不要按照那些老教程去选 boot 引导分区，也就是最后你的挂载点里没有“/boot”这一项，否则你就没办法 UEFI 启动两个系统了。

**3./home**：这个相当于你的个人文件夹，类似 Windows 里的 User，如果你是个娱乐向的用户，我建议最好能分配稍微大点，因为你的图片、视频、下载内容基本都在这里面，这些东西可不像在 Win 上面你想移动就能移动的。

``` xm
大小：最好不要低于8GB，我Ubuntu分区的总大小是64GB，这里我给了30G给home。
新分区的类型:逻辑分区
新分区的位置：空间起始位置
用于：EXT4日志文件系统
挂载点：/home
```

**4./**：因为除了 home 和 usr 还有很多别的目录，但那些都不是最重要的，“/”就把除了之前你挂载的 home 和 usr 外的全部杂项囊括了。

``` xml
大小：8G左右。
新分区的类型:逻辑分区
新分区的位置：空间起始位置
用于：EXT4日志文件系统
挂载点：/
```

**5./usr**：这个相当于你的软件安装位置，Linux下一般来说安装第三方软件你是没办法更改安装目录的，系统都会统一地安装到 /usr 目录下面。

``` xml
大小：这个分区必须要大，把剩余的空间都给它就对了。
新分区的类型:逻辑分区
新分区的位置：空间起始位置
用于：EXT4日志文件系统
挂载点：/usr
```

**6.设置安装引导的启动设置**：找到类型为 efi 的设备，如图：/dev/sda7，然后在安装启动引导器的设置，选择上面对应的设备。

### 4. 系统选择界面

安装完双系统，开机启动，进入系统选择界面类似如下：

![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190624183214.png)

分别选择 Ubuntu、Windows Boot Manager 能分别进入 Ubuntu、Windows10。但是这个系统选择界面很想改掉，比如去除多余的两项、设置启动系统选择的时间等。我在 Win 下安装了 EasyBCD 软件想修改下，发现 Linux/BSD 下的是不能修改的，如图：

![](https://img-1256179949.cos.ap-shanghai.myqcloud.com/20190624183812.png)

这个问题，待以后再说吧。



## 传统启动模式下的安装（Legacy Bios）

[windows 10中安装ubuntu-实现双系统 - 知乎](https://zhuanlan.zhihu.com/p/31271077)





---



## 遇到的坑

以下为在安装实验室服务器（CPU：至强 E5-2620v4，主板：技嘉x99 ud4）安装 Window7+下的遇到的问题。

**问题 1：**

Win7 下安装双系统，cpu 是第六代 cpu，采用u 盘进入 pe 安装的方式，在安装到「选择国家和语言」页面的时候鼠标和键盘都不能动，这里的问题原因是：第六代及以上 cpu 使用 u 盘方式安装，不行，因为不支持 usb3.0 什么的....  后面改为：使用 Ultraiso 软件刻入 Win7 系统至 u 盘，然后安装一个`Smart Tool`工具，写入驱动，就可安装成功了。

Smart Tool 使用方法：选择`Add USB drivers`，然后选择`USB storage`选择已刻入系统之后的U盘，再勾选`add NVMe driver`，点击`Start`即可。

以下列出参考资料，以后保不准可能用到：
- [安装WIN7加载识别USB3.0驱动的解决办法](http://blog.csdn.net/weiganliu/article/details/77234528)
- [win7原版映像中添加usb3.0驱动](http://blog.csdn.net/g_newbie/article/details/60578199)
- [向win7旗舰版U盘启动盘 添加usb3.0driver](http://blog.csdn.net/xforce_zuoxiang/article/details/52669298)
- [如何给Win7安装镜像注入usb3.0和nvme驱动](https://tieba.baidu.com/p/5175759153?traceid=)

**问题 2：** 

Win7 下安装 Ubuntu，关于安装过程 Ubuntu 分区的问题： 先设置 500M 主分区，格式类型选 ext4，挂载到 `/boot`；剩下可以全为 逻辑分区，格式为 ext4，挂载到`/`  ，其中这里虚拟内存可以不用（即不设置 swap 分区）。


注：第一，安装系统的时候选择安装在 `/boot`这个主分区的位置，这是启动分区；第二，Ubuntu 最多 4 个主分区；第三，Linux 分为启动 根分区 交换分区（swap）


Ubuntu 下修复引导。引导 win7 出来（网上方法）：

1, `sudo gedit /etc/default/grub`修改，`sudo update-grub`

2, `sudo gedit /boot/grub/grub.cfg` ,文件最后添加如下内容：
```
menuentry 'Win7' {
set root=(hd0,1);
ntldr /bootmgr
boot
}
```



---





# 硬盘数据恢复

将文件拖入回收站然后再将回收站清空，数据就真的被删除了吗？其实，数据并没有被真正从硬盘上清除，只是表面上的删除操作。就像是将一本书中的目录撕掉，但是目录对应的内容并不受影响。这是为什么呢？首先了解一下操作系统存储和删除数据的工作原理。电脑在向硬盘写入数据的时候，除了需要保存数据本身还需要将文件名、大小、创建时间等进行保存。这些文件信息被称为“文件头信息”，系统将他们与文件数据本身保存在分开的两个区域。“文件头信息”就好比是书本的目录部分，方便系统查找、定位和读取数据，文件数据是书籍的正文。操作系统在删除文件的时候，并不是将所有与这个文件相关的信息全部删除，而是将这个文件标记为已删除，将该文件占用的磁盘空间标记为空闲。因此，当一个文件被删除后，只有“文件头信息”里面的一小部分数据收到影响，文件数据都依然保留在硬盘上。由于数据被标记为删除，用户是看不到被回收站清空的数据的。

数据恢复技术就是基于该原理，开发数据恢复软件，让数据恢复成为很简单的一样任务。所以当入手新的电脑或是硬盘后，旧的设备不要轻易送人或是出售。即便硬盘已经被格式化或是数据被删除，但是，如果不法分子拿到你的硬盘并进行了数据恢复，进行窃取个人资料。近几年，类型的事情时有发生。

对于有一点电脑基础的用户，可以尝试使用专业的数据销毁工具。平时最为常用的方法是逻辑层面的数据擦除，可以使用相关的软件完成，可以达到数据清零的效果，防止数据恢复软件进行恢复。当然了，军用或是企业级的数据销毁设备效果会更好，不过普通用户没有必要使用。下面介绍几种简单实用的彻底数据清除的方法。

方法一：慢速格式化

使用电脑对分区或是U盘等存储设备进行格式化的时候，将“快速格式化”选项前面的勾去掉（如下图）。这种方式进行格式化可以称为慢速格式化，整个过程需要的时间比较长，但是效果可以达到清零的效果，这样操作后，一般的数据恢复软件只能搜索到一些系统文件。

——from：[如何彻底清除数据 防止文件被恢复 - 知乎](<https://zhuanlan.zhihu.com/p/23934273>)

回答1：

> 扇区不是分区……大家都知道，硬盘上面“写着”1和0。
> 清除扇区数据是把硬盘上某个区域（或者整个硬盘的用户区域）的1全部擦掉成0，这样操作的硬盘数据是无法用任何数据恢复软件来恢复的；
>
> 但如果删除分区，那么仅是将这个区域的文件分配表，文件格式，MBR之类的数据头部删掉而已，文件本身还在。仅仅删除分区，通过数据恢复软件是可以轻易恢复出数据的。普通的格式化同理。

回答2：

> 使用 Diskgenius 软件清除硬盘的数据不会损伤硬盘。 
>
> 基本所有的分区软件都支持清除硬盘数据的功能。
>
> 清除数据的方法基本都是通过向需要清除的区域的所有存储扇区写零，来达到覆盖原有数据，防止文件被不法人员回复的目的。这个写零的操作只是硬盘正常的写操作，和硬盘使用过程中写文件是没有区别的，所以不会对硬盘造成任何损伤。 但同时，此操作除了针对数据恢复的安全性也没有任何意义。

——from：[清除扇区的作用，与删除分区有和不同？ - 知乎](<https://www.zhihu.com/question/43010685>)

---

*update：2019-06-20* 